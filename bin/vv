#!/bin/bash
# Open nvim, choosing form a list of installed profiles.

declare -a profiles
i=0
for dir in ~/.config/nvim-* ; do
  profiles[i++]=$(basename "$dir")
done

select profile in ${profiles[@]}; do
  args="$@"
  if [ "$#" -eq "0" ]; then
    args="-S '~/.local/share/$NVIM_APPNAME/last.session'"
  fi
  NVIM_APPNAME="$profile" nvim $args
  break
done
